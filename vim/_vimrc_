" Everything is placed under "~/.vimz/"
"
" 1. download and put `vim-plug` under "~/.vimz/":
" see: https://github.com/junegunn/vim-plug
" it maybe like this: curl -fLo ~/.vimz/autoload/plug.vim --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
"
" 2. put this file under "~/.vimz/",
" then, append line `source ~/.vimz/_vimrc_` to "~/.vimrc"
"
" 3. start vim, and run:
"   :PlugInstall


set rtp+=~/.vimz

"" #Plugin manager
call plug#begin('~/.vimz/plugged')
Plug 's3rvac/AutoFenc'
Plug 'scrooloose/nerdtree'
Plug 'majutsushi/tagbar'  " need ctags
Plug 'tenfyzhong/tagbar-makefile.vim'
Plug 'henrik/vim-indexed-search'
Plug 'jkerian/HiCursorWords'
Plug 'luochen1990/rainbow'
Plug 'osyo-manga/vim-over'
Plug 'vim-airline/vim-airline'
"Plug 'fholgado/minibufexpl.vim'
Plug 'jeetsukumaran/vim-buffergator'
Plug 't9md/vim-choosewin'
Plug 'szw/vim-maximizer'
Plug 'easymotion/vim-easymotion'
Plug 'critiqjo/gtags.vim'
call plug#end()

" list plugins which will be customized below
if !exists("g:my_customizing_plugins")
  let g:my_customizing_plugins=['AutoFenc', 'nerdtree', 'tagbar', 'tagbar-makefile.vim',
                              \ 'vim-indexed-search', 'HiCursorWords', 'rainbow', 'vim-over',
                              \ 'vim-airline', 'vim-buffergator', 'vim-choosewin', 'vim-maximizer',
                              \ 'vim-easymotion']
endif


"" #Vim settings

" file encoding {
"set encoding=utf-8
"set fileencodings=ucs-bom,utf-8,ASCII,gbk,cp936,gb18030,big5,euc-jp,euc-kr,default,latin1
" }

set nu
"set relativenumber number
"autocmd InsertEnter * :set norelativenumber number
"autocmd InsertLeave * :set relativenumber number

set showcmd
set showmode    " Display the current mode
set showmatch   " Show matching brackets/parenthesis
set scrolloff=1    " Minimum lines to keep above and below cursorline
set mouse=a

"set wrap           " wrap long lines
set shiftwidth=4   " indent equals 4 spaces
set tabstop=4      " An indentation every 4 columns
"set expandtab      " Tabs are spaces, not tabs
"set softtabstop=4  " Let backspace delete indent
set autoindent
set cindent
"set backspace=indent,eol,start  " Backspace for dummies

set hlsearch
set ignorecase  " Case insensitive search. Use \c or \C to override it when you need
set smartcase   " In ignorecase mode: if upperCase present,case sensitive; else insensitive
set incsearch   " Find as you type search

"let mapleader = "\<Space>"
"nnoremap <Space> <Nop>
map <Space> <Leader>

nmap <Leader>bn :bn<CR>
nmap <Leader>bp :bp<CR>
"nnoremap ; :
nnoremap ZZ :x
" search selected strings in visual mode,default except backslash,see :help magic
" yank and search very nomagic {
vnoremap <Leader>* y/\V<C-r>"
vnoremap <Leader># y?\V<C-r>"
" }

" ctags setting
set tags=tags;
set autochdir
nnoremap <c-]> g<c-]>

set title
"set confirm
set nobackup    " backup~ file
set noundofile  " .un~ file,generated by Cream-vim on MsWin


"" #Plugin settings
" nerdtree
if count(g:my_customizing_plugins, 'nerdtree')
  nmap <Leader>tn :NERDTreeToggle<CR>
  " close vim if the only window left open is a NERDTree
  autocmd bufenter * if (winnr("$") == 1 && exists("b:NERDTreeType") && b:NERDTreeType == "primary") | q | endif
  let NERDTreeShowBookmarks = 1
  let NERDTreeIgnore = ['\.py[cd]$', '\~$', '\.swo$', '\.swp$', '^\.git$', '^\.hg$', '^\.svn$', '\.bzr$']
  let NERDTreeChDirMode = 0
  let NERDTreeQuitOnOpen = 1
  let NERDTreeMouseMode = 2
  let NERDTreeShowHidden = 1
  let NERDTreeKeepTreeInNewTab = 1
  let g:nerdtree_tabs_open_on_gui_startup = 0
endif

" tagbar
if count(g:my_customizing_plugins, 'tagbar')
  nmap <Leader>tt :TagbarToggle<CR>
  "let g:tagbar_ctags_bin = 'C:\Ctags\ctags.exe'
  let g:tagbar_sort = 0  " sort according to order
  let g:tagbar_indent = 3
  let g:tagbar_show_linenumbers = 1  " Show absolute line numbers
  "let g:tagbar_width = 60  " Width of the Tagbar window in characters
  "let g:tagbar_left = 1  " default right-hand side
  let g:tagbar_autofocus = 1 " focus Tagbar window when opened
  "autocmd FileType c,cpp nested :TagbarOpen
endif

" vim-indexed-search
if count(g:my_customizing_plugins, 'vim-indexed-search')
  let g:indexed_search_numbered_only = 1
endif

" rainbow
if count(g:my_customizing_plugins, 'rainbow')
  let g:rainbow_active = 1
endif

" vim-airline
if count(g:my_customizing_plugins, 'vim-airline')
  set laststatus=2
  let g:airline_section_z = '%l:%c%V(%p%%/%L)'  " line:col,percentage
endif

" vim-buffergator
if count(g:my_customizing_plugins, 'vim-buffergator')
  " the <Leader>b default is :BuffergatorOpen<CR>
  nnoremap <silent> <Leader>b<CR> :BuffergatorOpen<CR>
endif

" vim-choosewin
if count(g:my_customizing_plugins, 'vim-choosewin')
  "nmap <C-w> <Plug>(choosewin)
  nmap <Leader>w     <Plug>(choosewin)
  nmap <Leader>w<CR> <Plug>(choosewin)
  let g:choosewin_overlay_enable = 1
endif

" vim-maximizer
if count(g:my_customizing_plugins, 'vim-maximizer')
  let g:maximizer_set_default_mapping = 0
  nnoremap <silent><Leader>wm :MaximizerToggle<CR>
  vnoremap <silent><Leader>wm :MaximizerToggle<CR>gv
  inoremap <silent><Leader>wm <C-o>:MaximizerToggle<CR>
endif

" vim-easymotion
if count(g:my_customizing_plugins, 'vim-easymotion')
  nmap f <Plug>(easymotion-s)
endif

